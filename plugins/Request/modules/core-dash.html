<style>
    .cpu-core-card {
        transition: all 0.3s ease-in-out;
    }

    .cpu-core-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3) !important;
    }

    .capacity-progress {
        height: 8px;
        border-radius: 10px;
        overflow: hidden;
    }

    .capacity-progress .progress-bar {
        transition: width 0.8s ease-in-out;
    }

    .chart-fullscreen {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        z-index: 9999 !important;
        padding: 20px !important;
        backdrop-filter: blur(10px);
        border-radius: 0 !important;
    }

    .chart-fullscreen .card-body {
        height: calc(100vh - 140px) !important;
    }

    .chart-fullscreen #resourcesChart {
        height: 100% !important;
    }

    .pulse-animation {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            opacity: 1;
        }
        50% {
            opacity: 0.7;
        }
        100% {
            opacity: 1;
        }
    }
</style>
<!-- Página de Capacidade do Sistema -->
<div class="container-fluid">
    <!-- Cards de Capacidade Principal -->
    <div class="row g-3 mb-4">
        <div class="col-xl-3 col-md-6">
            <div class="card bg-dark border-0 shadow-lg h-100">
                <div class="card-body p-4"
                     style="background: linear-gradient(135deg, #28a745, #20c997) !important; border-radius: 15px;">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="card-title text-white mb-1">CPUs Disponíveis</h5>
                            <div class="text-white-50 small">Núcleos de processamento</div>
                        </div>
                        <div class="text-white opacity-75">
                            <i class="fas fa-microchip fa-2x"></i>
                        </div>
                    </div>
                    <div class="mt-3">
                        <div class="d-flex align-items-center text-white mb-2">
                            <i class="fas fa-server me-2"></i>
                            <span class="me-1">Total de Núcleos:</span>
                            <strong id="totalCpuCores">0</strong>
                        </div>
                        <div class="d-flex align-items-center text-white">
                            <i class="fas fa-bolt me-2"></i>
                            <span class="me-1">Chamadas suportadas:</span>
                            <strong id="maxCapacity">0</strong>&nbsp;
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card bg-dark border-0 shadow-lg h-100">
                <div class="card-body p-4 text-center">
                    <div class="text-primary opacity-75 mb-2">

                        <i class="fa-sharp-duotone fa-light fa-microphone-lines fa-3x"></i>
                    </div>
                    <h5 class="card-title text-light mb-1">Chamadas</h5>
                    <div class="text-muted small mb-2">Chamadas com voz / em progresso</div>
                    <div class="display-5 text-primary fw-bold" id="currentUsage2" >0</div>
                    <div class="display-5 text-primary fw-bold" id="cpuUsage" style="display: none !important;">0%</div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card bg-dark border-0 shadow-lg h-100">
                <div class="card-body p-4 text-center">
                    <div class="text-warning opacity-75 mb-2">
                        <i class="fas fa-memory fa-3x"></i>
                    </div>
                    <h5 class="card-title text-light mb-1">Memória RAM</h5>
                    <div class="text-muted small mb-2">Uso atual</div>
                    <div class="display-5 text-warning fw-bold" id="memoryUsage">0%</div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card bg-dark border-0 shadow-lg h-100">
                <div class="card-body p-4 text-center">
                    <div class="text-info opacity-75 mb-2">
                        <i class="fas fa-network-wired fa-3x"></i>
                    </div>
                    <h5 class="card-title text-light mb-1">Banda de Rede</h5>
                    <div class="text-muted small mb-2">Utilização</div>
                    <div class="display-5 text-info fw-bold" id="networkUsage">0%</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Gráficos de Recursos -->
    <div class="row mb-4">
        <div class="col-lg-6">
            <div class="card bg-dark border-0 shadow-lg h-100">
                <div class="card-header bg-transparent border-bottom border-secondary">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="text-light mb-0">
                            <i class="fas fa-microchip me-2"></i>Uso de CPU
                        </h5>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="pauseCpuBtn"
                                    title="Pausar/Retomar">
                                <i class="fas fa-pause"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div class="chart-container">
                        <div id="cpuChart"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card bg-dark border-0 shadow-lg h-100">
                <div class="card-header bg-transparent border-bottom border-secondary">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="text-light mb-0">
                            <i class="fas fa-chart-area me-2"></i>Recursos do Sistema
                        </h5>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="pauseResourcesBtn"
                                    title="Pausar/Retomar">
                                <i class="fas fa-pause"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="fullscreenResourcesBtn"
                                    title="Tela Cheia">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div class="chart-container">
                        <div id="resourcesChart"></div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Seção de Processos Críticos -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-dark border-0 shadow-lg">
                <div class="card-header bg-transparent border-bottom border-secondary">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="text-light mb-0">
                            <i class="fas fa-cogs me-2"></i>Processos Críticos
                        </h5>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-warning"
                                    onclick="restartAllRtpWorkers()"
                                    title="Reiniciar todos os workers RTP">
                                <i class="fas fa-redo me-1"></i>Restart Workers
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body p-0" style="max-height: 400px; overflow-y: auto;">
                    <div class="table-responsive">
                        <table class="table table-dark table-hover table-sm mb-0">
                            <thead class="table-secondary">
                            <tr>
                                <th class="text-white border-0 ps-3">Processo</th>
                                <th class="text-white border-0">CPU%</th>
                                <th class="text-white border-0">RAM</th>
                                <th class="text-white border-0">Taskset</th>
                                <th class="text-white border-0">Status</th>
                                <th class="text-white border-0 pe-3">Ações</th>
                            </tr>
                            </thead>
                            <tbody id="processesTable">
                            <!-- Dados serão carregados via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Seção de Capacidade por CPU -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-dark border-0 shadow-lg">
                <div class="card-header bg-transparent border-bottom border-secondary">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="text-light mb-0">
                            <i class="fas fa-microchip me-2"></i>Capacidade por CPU (<span id="totalcr"></span>
                            chamadas/núcleo)
                        </h5>
                        <div class="d-flex align-items-center">
                            <div class="me-3">
                                <small class="text-muted me-2">Status:</small>
                                <span id="connectionStatus" class="text-secondary">
                                    <i class="fas fa-wifi-slash me-2"></i>Desconectado
                                </span>
                            </div>
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-sm btn-outline-info" id="refreshCapacityBtn"
                                        title="Atualizar Dados">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="exportCapacityBtn"
                                        title="Exportar Relatório">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div class="row" id="cpuCapacityCards">
                        <!-- Cards de CPU serão gerados dinamicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Tabelas de Processos e Serviços -->
    <div class="row mb-4">
        <div class="col-lg-6">
            <div class="row g-3 h-100">
                <!-- Estatísticas de Capacidade -->
                <div class="col-12">
                    <div class="card bg-dark border-0 shadow h-100">
                        <div class="card-header bg-transparent border-bottom border-secondary">
                            <h6 class="text-light mb-0">
                                <i class="fas fa-tachometer-alt me-2"></i>Estatísticas de Capacidade
                            </h6>
                        </div>
                        <div class="card-body p-3">
                            <div class="row g-2">
                                <div class="col-12 mb-3">
                                    <div class="bg-dark rounded p-3 border border-success border-opacity-25">
                                        <div class="text-white small mb-1">Capacidade Total</div>
                                        <div class="h4 text-success mb-0" id="totalSystemCapacity">0</div>
                                        <div class="small text-muted">chamadas simultâneas</div>
                                    </div>
                                </div>
                                <div class="col-12 mb-3">
                                    <div class="bg-dark rounded p-3 border border-warning border-opacity-25">
                                        <div class="text-white small mb-1">Em Uso Atualmente</div>
                                        <div class="h4 text-warning mb-0" id="currentUsage">0</div>
                                        <div class="small text-muted">chamadas ativas</div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="bg-dark rounded p-3 border border-info border-opacity-25">
                                        <div class="text-white small mb-1">Capacidade Disponível</div>
                                        <div class="h4 text-info mb-0" id="availableCapacity">0</div>
                                        <div class="small text-muted">chamadas livres</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Informações de Sistema -->
        <div class="col-lg-6">
            <div class="card bg-dark border-0 shadow-lg">
                <div class="card-header bg-transparent border-bottom border-secondary">
                    <h5 class="text-light mb-0">
                        <i class="fas fa-info-circle me-2"></i>Informações do Sistema
                    </h5>
                </div>
                <div class="card-body p-3">
                    <div class="row g-2">
                        <div class="col-6">
                            <div class="bg-secondary bg-opacity-25 rounded p-2">
                                <div class="small text-muted">Sistema Operacional</div>
                                <div class="text-white" id="osInfo">-</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="bg-secondary bg-opacity-25 rounded p-2">
                                <div class="small text-muted">Uptime</div>
                                <div class="text-white" id="systemUptime">-</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="bg-secondary bg-opacity-25 rounded p-2">
                                <div class="small text-muted">Carga Média (1m)</div>
                                <div class="text-white" id="loadAverage">-</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="bg-secondary bg-opacity-25 rounded p-2">
                                <div class="small text-muted">Temperatura</div>
                                <div class="text-white" id="cpuTemp">-</div>
                            </div>
                        </div>
                        <div class="col-12 mt-3">
                            <div class="bg-secondary bg-opacity-25 rounded p-2">
                                <div class="small text-muted mb-2">Armazenamento</div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 0%"
                                         id="diskUsageBar"></div>
                                </div>
                                <div class="small text-white mt-1" id="diskUsageText">0% utilizado</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>